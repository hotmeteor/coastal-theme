{{ flash() }}

{{ open_form({'data-ajax-handler': 'shop:onUpdateCustomerProfile', 'class': 'form-horizontal custom', 'data-ajax-update': "#profile-addresses=shop-customerprofile", 'data-validation-message' : ''}) }}
<input type="hidden" name="billing[id]" value="{{ billing.id }}" />

<div class="col-sm-12">

    <section id="billing-info">
        <h4 class="breaker">Billing Information</h4>

        <div class="form-group">
            <label class="col-sm-3 control-label">Your Name</label>
            <div class="col-sm-9 form-inline">
                <div class="form-group">
                    <label for="billing[first_name]" class="control-label sr-only">First Name</label>
                    <input type="text" class="form-control input-sm" id="billing[first_name]" name="billing[first_name]" value="{{ billing.first_name }}" size="20" placeholder="First Name" />
                    <span class="error small text-danger"></span>
                </div>

                <div class="form-group">
                    <label for="billing[last_name]" class="control-label sr-only">Last Name</label>
                    <input type="text" class="form-control input-sm" id="billing[last_name]" name="billing[last_name]" value="{{ billing.last_name }}" size="20" placeholder="Last Name" />
                    <span class="error small text-danger"></span>
                </div>
            </div>
        </div>

        <div class="form-group">
            <label for="billing[email]" class="col-sm-3 control-label">Email</label>
            <div class="col-sm-9">
                <input type="email" class="form-control input-sm" id="billing[email]" name="billing[email]" value="{{ customer.email }}" size="40" />
                <span class="error small text-danger"></span>
            </div>
        </div>

        <div class="form-group">
            <label for="billing[phone]" class="col-sm-3 control-label">Phone</label>
            <div class="col-sm-9">
                <input type="tel" class="form-control input-sm" id="billing[phone]" name="billing[phone]" value="{{ billing.phone }}" size="16" />
                <span class="error small text-danger"></span>
            </div>
        </div>

        <div class="form-group">
            <label for="billing[street_address]" class="col-sm-3 control-label">Address</label>
            <div class="col-sm-9">
                <input type="text" class="form-control input-sm" id="billing[street_address]" name="billing[street_address]" value="{{ billing.street_address }}" size="40" placeholder="Street" />
                <span class="error small text-danger"></span>
            </div>
        </div>

        <div class="form-group">
            <div class="col-sm-3"></div>
            <div class="col-sm-9 form-inline">
                <div class="form-group">
                    <label for="billing[city]" class="control-label sr-only">City</label>
                    <input type="text" class="form-control input-sm" id="billing[city]" name="billing[city]" value="{{ billing.city }}" size="20" placeholder="City" />
                    <span class="error small text-danger"></span>
                </div>

                <div class="form-group">
                    <label for="billing[postal_code]" class="control-label sr-only">Zip</label>
                    <input type="text" class="form-control input-sm" id="billing[postal_code]" name="billing[postal_code]" value="{{ billing.postal_code }}" size="6" placeholder="Zip" />
                    <span class="error small text-danger"></span>
                </div>
            </div>
        </div>

        <div class="form-group">
            <label for="billing_country" class="col-sm-3 control-label">Country</label>
            <div class="col-sm-7">
                <select class="form-control input-sm" id="billing_country" name="billing[shop_country_id]" data-state-selector="#billing_state" data-current-state="{{ billing.country.id }}">
                    {% for country in countries %}
                    <option {{ option_state(billing.country.id, country.id) }} value="{{ country.id }}">{{ country.name }}</option>
                    {% endfor %}
                </select> 
                <span class="error small text-danger"></span>
            </div>
        </div>

        <div class="form-group">
            <label for="billing_state" class="col-sm-3 control-label">State</label>
            <div class="col-sm-9">
                <select class="form-control input-sm" id="billing_state" name="billing[shop_state_id]" data-ajax-refresh>
                    {{ partial('shop-stateoptions', {'states': billingStates, 'selected': billing.state.id}) }}
                </select>
                <span class="error small text-danger"></span>
            </div>
        </div>
    </section>

    <div class="form-group">
        <div class="col-sm-offset-3 col-sm-9">
            <div class="checkbox">
                <label>
                    <input type="checkbox" class="js-mirrordata" checked> My shipping information is the same
                </label>
            </div>
        </div>
    </div>

    <section class="mb1" id="shipping-info">

        <h4 class="breaker">Shipping Information</h4>

        <div class="form-group">
            <label class="col-sm-3 control-label">Your Name</label>
            <div class="col-sm-9 form-inline">
                <div class="form-group">
                    <label for="shipping[first_name]" class="control-label sr-only">First Name</label>
                    <input type="text" class="form-control input-sm" id="shipping[first_name]" name="shipping[first_name]" value="{{ shipping.first_name }}" size="20" placeholder="First Name" />
                    <span class="error small text-danger"></span>
                </div>

                <div class="form-group">
                    <label for="shipping[last_name]" class="control-label sr-only">Last Name</label>
                    <input type="text" class="form-control input-sm" id="shipping[last_name]" name="shipping[last_name]" value="{{ shipping.last_name }}" size="20" placeholder="Last Name" />
                    <span class="error small text-danger"></span>
                </div>
            </div>
        </div>

        <div class="form-group">
            <label for="shipping[phone]" class="col-sm-3 control-label">Phone</label>
            <div class="col-sm-9">
                <input type="tel" class="form-control input-sm" id="shipping[phone]" name="shipping[phone]" value="{{ shipping.phone }}" size="16" />
                <span class="error small text-danger"></span>
            </div>
        </div>

        <div class="form-group">
            <label for="shipping[street_address]" class="col-sm-3 control-label">Address</label>
            <div class="col-sm-9">
                <input type="text" class="form-control input-sm" id="shipping[street_address]" name="shipping[street_address]" value="{{ shipping.street_address }}" size="40" placeholder="Street" />
                <span class="error small text-danger"></span>
            </div>
        </div>

        <div class="form-group">
            <div class="col-sm-3"></div>
            <div class="col-sm-9 form-inline">
                <div class="form-group">
                    <label for="shipping[city]" class="control-label sr-only">City</label>
                    <input type="text" class="form-control input-sm" id="shipping[city]" name="shipping[city]" value="{{ shipping.city }}" size="20" placeholder="City" />
                    <span class="error small text-danger"></span>
                </div>

                <div class="form-group">
                    <label for="shipping[postal_code]" class="control-label sr-only">Zip</label>
                    <input type="text" class="form-control input-sm" id="shipping[postal_code]" name="shipping[postal_code]" value="{{ shipping.postal_code }}" size="6" placeholder="Zip" />
                    <span class="error small text-danger"></span>
                </div>
            </div>
        </div>

        <div class="form-group">
            <label for="shipping_country" class="col-sm-3 control-label">Country</label>
            <div class="col-sm-7">
                <select id="shipping_country" name="shipping[shop_country_id]" class="form-control input-sm" data-state-selector="#shipping_state" data-current-state="{{ shipping.stateId }}">
                    {% for country in countries %}
                    <option {{ option_state(shipping.countryId, country.id) }} value="{{ country.id }}">{{ country.name }}</option>
                    {% endfor %}
                </select>
                <span class="error small text-danger"></span>
            </div>
        </div>

        <div class="form-group">
            <label for="shipping_state" class="col-sm-3 control-label">State</label>
            <div class="col-sm-9">
                <select id="shipping_state" name="shipping[shop_state_id]" class="form-control input-sm" data-ajax-refresh> 
                {{ partial('shop-stateoptions', {'states': shippingStates, 'selected': shipping.stateId}) }}
                </select>
                <span class="error small text-danger"></span>
            </div>
        </div>
    </section>

    <div class="form-group">
        <div class="col-sm-offset-3 col-sm-9">
            <input class="btn btn-dark" type="submit" value="Update" />
            <input type="hidden" name="flash" value="Your profile has been successfully updated." />
            <input type="hidden" name="redirect" value="{{ root_url('/profile') }}" />
        </div>
    </div>

</div>

<!-- 
<div class="col-sm-6">
    <h3>Billing information</h3>
    <div class="row">
        <div class="six columns">
            <label for="first_name">First Name</label>
            <input name="billing[first_name]" id="first_name" type="text" class="text" value="{{ billing.first_name }}" />
            <span class="error"></span>
        </div>
        <div class="six columns">
            <label for="last_name">Last Name</label>
            <input name="billing[last_name]" id="last_name" type="text" class="text" value="{{ billing.last_name }}" />
            <span class="error"></span>
        </div>
    </div>

    <div class="row">
        <div class="six columns">
            <label for="email">E-mail Address</label>
            <input type="text" name="billing[email]" id="email" value="{{ customer.email }}" />
            <span class="error"></span>
        </div>
        <div class="six columns">
            <label for="phone">Phone Number</label>
            <input type="text" name="billing[phone]" id="phone" value="{{ billing.phone }}" />
            <span class="error"></span>
        </div>
    </div>

    <label for="billing_address">Address</label>
    <textarea id="billing_address" name="billing[street_address]">{{ billing.street_address }}</textarea>
    <span class="error"></span>
    <div class="row">
        <div class="six columns">
            <label for="billing_city">City</label>
            <input type="text" name="billing[city]" id="billing_city" value="{{ billing.city }}" />
            <span class="error"></span>
        </div>
        <div class="six columns">
            <label for="billing_zip">Zip Code</label>
            <input type="text" id="billing_zip" name="billing[postal_code]" value="{{ billing.postal_code }}" />
            <span class="error"></span>
        </div>
    </div>
    <div class="row">
        <div class="six columns">
            <label for="billing_country">Country</label>
            <select id="billing_country" name="billing[shop_country_id]" data-state-selector="#billing_state" data-current-state="{{ billing.country.id }}">
                {% for country in countries %}
                <option {{ option_state(billing.country.id, country.id) }} value="{{ country.id }}">{{ country.name }}</option>
                {% endfor %}
            </select>
            <span class="error"></span>
        </div>
        <div class="six columns">
            <label for="billing_state">State</label>
            <select id="billing_state" name="billing[shop_state_id]" data-ajax-refresh>
                {{ partial('shop-stateoptions', {'states': billingStates, 'selected': billing.state.id}) }}
            </select>
            <span class="error"></span>
        </div>
    </div>
</div>
 -->
<!-- <div class="col-sm-6">
    <h3 class="inline-block">Shipping information</h3>
    <a href="#" id="profile_billing_to_shipping" data-ajax-handler="shop:onUpdateCustomerProfile" data-ajax-update="#profile-addresses=shop-customerprofile" data-validation-message="" data-ajax-extra-fields="copy_billing_to_shipping='1'">Copy Shipping Information</a>
    <input type="hidden" name="shipping[id]" value="{{ shipping.id }}" />

    <div class="row">
        <div class="six columns">
            <label for="shipping_first_name">First Name</label>
            <input type="text" name="shipping[first_name]" id="shipping_first_name" value="{{ shipping.first_name }}" />
            <span class="error"></span>
        </div>
        <div class="six columns">
            <label for="shipping_last_name">Last Name</label>
            <input type="text" name="shipping[last_name]" id="shipping_last_name" value="{{ shipping.last_name }}" />
            <span class="error"></span>
        </div>
    </div>
    <div class="row">
        <div class="twelve columns">
            <label for="shipping_phone">Phone Number</label>
            <input type="text" name="shipping[phone]" id="shipping_phone" value="{{ shipping.phone }}" />
            <span class="error"></span>
        </div>
    </div>

    <label for="shipping_address">Address</label>
    <textarea name="shipping[street_address]" id="shipping_address">{{ shipping.street_address }}</textarea>
    <span class="error"></span>
    <div class="row">
        <div class="six columns">
            <label for="shipping_city">City</label>
            <input type="text" name="shipping[city]" id="shipping_city" value="{{ shipping.city }}" />
            <span class="error"></span>
        </div>
        <div class="six columns">
            <label for="shipping_zip">Zip Code</label>
            <input type="text" name="shipping[postal_code]" id="shipping_zip" value="{{ shipping.postal_code }}" />
            <span class="error"></span>
        </div>
    </div>
    <div class="row">
        <div class="six columns">
            <label for="shipping_country">Country</label>
            <select id="shipping_country" name="shipping[shop_country_id]" data-state-selector="#shipping_state" data-current-state="{{ shipping.country.id }}">
                {% for country in countries %}
                <option {{ option_state(shipping.country.id, country.id) }} value="{{ country.id }}">{{ country.name }}</option>
                {% endfor %}
            </select>
            <span class="error"></span>
        </div>
        <div class="six columns">
            <label for="shipping_state">State</label>
            <select id="shipping_state" name="shipping[shop_state_id]" data-ajax-refresh>
                {{ partial('shop-stateoptions', {'states': shippingStates, 'selected': shipping.state.id}) }}
            </select>
            <span class="error"></span>
        </div>
    </div>
</div> -->


{{ close_form() }}
